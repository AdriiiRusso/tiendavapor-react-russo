{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Adriii\\\\Desktop\\\\tiendavapor-react-russo\\\\src\\\\components\\\\context\\\\CartContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext, createContext } from \"react\";\nimport { fire } from '../../Firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CarritoContext = /*#__PURE__*/createContext([]);\nexport const useCarritoContext = () => {\n  _s();\n\n  return useContext(CarritoContext);\n};\n\n_s(useCarritoContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport const CartContext = ({\n  children\n}) => {\n  _s2();\n\n  const [carrito, setCarrito] = useState([]);\n  const [orden, setOrden] = useState({});\n  const [numeroOrden, setNumeroOrden] = useState(false);\n  useEffect(() => {\n    (orden === null || orden === void 0 ? void 0 : orden.carrito) && fire.setCollection(\"ventas\", [orden], null, setNumeroOrden);\n  }, [orden]);\n  useEffect(() => {\n    cart.numeroOrden = numeroOrden;\n    numeroOrden && carrito.forEach(item => fire.updateCollectionDoc(\"productos\", item.id, {\n      stock: item.stock - item.cantidad\n    })); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [numeroOrden]);\n  const cart = {};\n  cart.numeroOrden = numeroOrden;\n\n  cart.addItem = (item, cant) => {\n    carrito.push({ ...item,\n      cantidad: cant\n    });\n    carrito.total = cart.total();\n    setCarrito([...carrito]);\n  };\n\n  cart.total = () => {\n    return carrito.reduce((a, b) => a + parseInt(b.cantidad) * parseInt(b.precio), 0);\n  };\n\n  cart.removeItem = id => {\n    setCarrito(carrito.filter(item => item.id !== id));\n  };\n\n  cart.clearCarrito = () => {\n    setCarrito([]);\n    setOrden({});\n    setNumeroOrden(false);\n  };\n\n  cart.isInCarrito = id => {\n    return carrito.find(item => item.id === id) ? true : false;\n  };\n\n  cart.isEmpty = () => carrito.length === 0;\n\n  cart.count = () => carrito.reduce((a, b) => a + parseInt(b.cantidad), 0) || 0;\n\n  cart.generarOrden = buyer => {\n    setOrden({\n      comprador: { ...buyer\n      },\n      carrito: { ...carrito\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(CarritoContext.Provider, {\n    value: {\n      carrito,\n      cart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(CartContext, \"CmFSLgsGE55ijZOqyQNZ2ZHjim4=\");\n\n_c = CartContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartContext\");","map":{"version":3,"sources":["C:/Users/Adriii/Desktop/tiendavapor-react-russo/src/components/context/CartContext.js"],"names":["React","useEffect","useState","useContext","createContext","fire","CarritoContext","useCarritoContext","CartContext","children","carrito","setCarrito","orden","setOrden","numeroOrden","setNumeroOrden","setCollection","cart","forEach","item","updateCollectionDoc","id","stock","cantidad","addItem","cant","push","total","reduce","a","b","parseInt","precio","removeItem","filter","clearCarrito","isInCarrito","find","isEmpty","length","count","generarOrden","buyer","comprador"],"mappings":"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","sourcesContent":["import React, { useEffect,useState, useContext, createContext } from \"react\"\r\nimport { fire } from '../../Firebase'\r\n\r\nexport const CarritoContext = createContext([])\r\n\r\nexport const useCarritoContext = () => useContext(CarritoContext)\r\n\r\nexport const CartContext = ({children}) => {\r\n  const [carrito, setCarrito] = useState([])\r\n  const [orden, setOrden] = useState({})\r\n  const [numeroOrden, setNumeroOrden] = useState(false)\r\n\r\n  useEffect(() => {\r\n    orden?.carrito && fire.setCollection(\"ventas\", [orden], null, setNumeroOrden)\r\n  }, [orden])\r\n\r\n  useEffect(() => {\r\n    cart.numeroOrden = numeroOrden\r\n\r\n    numeroOrden && carrito.forEach(item => fire.updateCollectionDoc(\"productos\", item.id, {stock: (item.stock - item.cantidad)}))\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [numeroOrden])\r\n\r\n  const cart = {}\r\n\r\n  cart.numeroOrden = numeroOrden\r\n\r\n  cart.addItem = (item, cant) => {\r\n    carrito.push({\r\n      ...item, \r\n      cantidad: cant\r\n    })\r\n    carrito.total = cart.total()\r\n    setCarrito([...carrito])\r\n  }\r\n  cart.total = () => {\r\n    return carrito.reduce((a, b) => a + (parseInt(b.cantidad) * parseInt(b.precio)), 0)\r\n  }\r\n\r\n  cart.removeItem = (id) => {\r\n    setCarrito(carrito.filter( item => item.id !== id))\r\n  }\r\n\r\n  cart.clearCarrito = () =>{\r\n    setCarrito([])\r\n    setOrden({})\r\n    setNumeroOrden(false)\r\n  }\r\n\r\n  cart.isInCarrito = (id) => { \r\n    return carrito.find(item => item.id === id) ? true : false\r\n  }\r\n\r\n  cart.isEmpty = () => carrito.length === 0\r\n\r\n  cart.count = () => carrito.reduce( (a,b) => a+parseInt(b.cantidad), 0) || 0\r\n\r\n  cart.generarOrden = (buyer) =>{\r\n    setOrden({\r\n      comprador: {...buyer},\r\n      carrito: {...carrito}\r\n    })\r\n  }\r\n\r\n  return (\r\n    <CarritoContext.Provider value={{carrito, cart}}>\r\n        {children}\r\n    </CarritoContext.Provider>\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}